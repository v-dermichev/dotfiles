set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

set -g mouse on

set -g focus-events on

set -g default-terminal "screen-256color"
set -as terminal-features ",xterm-256color:RGB"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-strategy-nvim 'session'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'alexwforsythe/tmux-which-key'
set -g @plugin 'jaclu/tmux-menus'

# Source .tmux.conf as suggested in `man tmux`
bind R source-file '~/.tmux.conf'

# Save every 15 minutes
set -g @continuum-save-interval '15'

# Automatically restore when tmux starts
set -g @continuum-restore 'on'

set -g prefix C-a
unbind C-b
# bind C-a send-prefix

# Makes inactive windows dim so the active one pops
# set -g window-status-format "#[fg=white,bg=grey] #I:#W "
# set -g window-status-current-format "#[fg=white,bg=blue,bold] #I:#W "


# set -g window-status-current-format "#[fg=brightgreen,bold]â— #I:#W #[default]"
# set -g window-status-format "â—‹ #I:#W "
# set -g status-style "bg=#1e1e2e,fg=#cdd6f4"

# set -g status-style "bg=#1e1e2e,fg=#cdd6f4"
# set -g status-left "#[fg=#89b4fa] #S "
# set -g status-right "#[fg=#a6e3a1] %Y-%m-%d #[fg=#89b4fa]%H:%M "
# set -g window-status-format " #[fg=#585b70]â—‹ #I:#W "
# set -g window-status-current-format "#[fg=#1e1e2e,bg=#89b4fa,bold] â— #I:#W #[default]"




# ##### GENERAL SETTINGS #####
# set -g status on
# set -g status-interval 5
# set -g status-justify left
# set -g status-style "bg=#0f0f1a,fg=#c0c0ff"  # Cyberdream dark background
#
# ##### LEFT SIDE: SESSION NAME #####
# set -g status-left-length 25
# set -g status-left "#[fg=#89fffd,bold]îž• #S #[fg=#ff61a6]| "
#
# ##### LEFT SIDE: WINDOWS (Powerline style) #####
# # Inactive windows
# set -g window-status-format "#[fg=#7f7fff]î‚° #I:#W "
# # Active window
# set -g window-status-current-format "#[fg=#0f0f1a,bg=#ff61a6,bold]î‚° #I:#W #[fg=#ff61a6,bg=#0f0f1a]î‚°"
# set -g window-status-separator ""
#
# ##### RIGHT SIDE: SYSTEM INFO (Battery, CPU, Git, Date/Time) #####
# # Battery (requires acpi)
# set -g status-right-length 120
# set -g status-right "#( \
#   bat=$(acpi 2>/dev/null | awk -F', ' '{print $2}' | tr -d '%'); \
#   if [ -n \"$bat\" ]; then echo \"#[fg=#ff9e64]ðŸ”‹ $bat%\"; fi \
# ) #[fg=#89fffd]| #(uptime | awk -F',' '{print $1}' | sed 's/^ //') #[fg=#ff61a6]| #( \
#   git -C #{pane_current_path} rev-parse --abbrev-ref HEAD 2>/dev/null | sed 's/^/î‚  /' \
# ) #[fg=#89fffd]| #[fg=#ff9e64]%Y-%m-%d %H:%M #[default]"
#
# ##### PANES #####
# set -g pane-border-style "fg=#4b4b67"
# set -g pane-active-border-style "fg=#ff61a6"


set -s escape-time 5

##### GENERAL STATUS BAR SETTINGS #####
# Status bar height and style
set -g status on
set -g status-interval 5
set -g status-justify left
set -g status-position top
set -g status-style "bg=#0f0f1a,fg=#c0c0ff" 

##### LEFT SIDE: SESSION NAME #####
# set -g status-left-length 30
set -g status-left "#[fg=#ff61a6,bold] îž• #S #[fg=#89fffd]| "

##### WINDOW LIST #####
# Inactive windows
set -g window-status-format "#[fg=#7f7fff]  #I:#W  "
# Active window
set -g window-status-current-format "#[fg=#0f0f1a,bg=#ff61a6,bold]î‚° #I:#W #[fg=#ff61a6,bg=#0f0f1a]î‚° "

# Separator between windows
set -g window-status-separator ""

##### RIGHT SIDE: DATE, TIME, USER, BATTERY, CPU #####
# set -g status-right-length 80
# set -g status-right "#[fg=#ff9e64]âš¡ #(uptime | awk -F',' '{print $1}') #[fg=#89fffd]| #[fg=#ff61a6]ï‡› #(whoami) #[fg=#89fffd]| #[fg=#ff9e64]%Y-%m-%d %H:%M #[default]"


set -g status-right-length 120
set -g status-right "#(~/.config/tmux/list_sessions.sh)#[fg=#89fffd]| %Y-%m-%d %H:%M "




# Show all sessions in status-left
# set -g status-left "#[fg=#89fffd,bold]îž• #S #[fg=#ff61a6]| #(tmux list-sessions -F 'î‰­ #S' | tr '\n' ' ') "
##### LEFT SIDE: SESSION NAME + WINDOWS #####
# Custom script to list windows with highlighting

# Show all sessions on the right
# set -g status-right-length 120
# set -g status-right "#(tmux list-sessions -F '#S' | sed 's/^/î‰­ /') #[fg=#ff61a6]| %Y-%m-%d %H:%M "

##### OPTIONAL: VISUAL CLEANUP #####
# Remove borders around windows
set -g pane-border-style "fg=#4b4b67"
set -g pane-active-border-style "fg=#ff61a6"


# Copy mode selection (gray-ish)
set -g mode-style "bg=#5a5a5a,fg=#c0c0ff,bold"

# Copy mode selection
# set -g mode-style "bg=#4b1e7f,fg=#c0c0ff,bold"

# Copy mode selection (slightly lighter dark purple)
# set -g mode-style "bg=#5e2aff,fg=#c0c0ff,bold"

# Copy mode selection (bright pink neon)
# set -g mode-style "bg=#ff61a6,fg=#0f0f1a,bold"


# Optional: cursor line in copy mode (slightly brighter purple)
# set -g mode-line-style "bg=#6a2cff,fg=#c0c0ff,bold"


# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
